@page
@model IndexModel
@{
    ViewData["Title"] = "圖片操作";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
    <title>@ViewData["Title"]</title>
    <!--link rel="stylesheet" href="css/styles.css" /-->
    <style>
        body {
            display: flex;
            justify-content: center; /* 水平方向居中 */
            align-items: center; /* 垂直方向居中 */
            margin: 0;
            height: 100vh;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            position: relative;
        }

        #image-container {
            width: 400px;
            height: 400px;
            overflow: hidden;
            touch-action: none; /* 禁用瀏覽器默認手勢操作 */
            border: 3px solid white;
            background: #fff;
            position: relative; /* 保持图片移动绝对定位的基础 */
            z-index: 10; /* 保证容器在顶层 */
        }

        #image {
            position: relative;
            transform-origin: center;
            touch-action: none;
            user-select: none;
            transition: transform 0.3s ease;
        }

        #controls {
            display: flex;
            gap: 10px;
            position: absolute;
            bottom: -60px; /* 调整按钮显示在容器下方 */
            left: 50%;
            transform: translateX(-50%);
            z-index: 20; /* 保证按钮层级高 */
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #FFFFFF;
            color: white;
            border: none;
            border-radius: 5px;
        }

            button:hover {
                background-color: #0056b3;
            }

        #rotate-slider-container {
            display: none; /* 默认隐藏旋转滑块 */
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 10px;
            z-index: 15; /* 滑块显示在较高层级 */
        }

        #rotate-slider {
            width: 300px;
        }

        #complete-btn {
            margin-top: 10px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
        }

            #complete-btn:hover {
                background-color: #0056b3;
            }

    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://superal.github.io/canvas2image/canvas2image.js"></script>
</head>
<body>
    <div id="image-container">
        <img crossorigin="anonymous" id="image" src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Cat_August_2010-4.jpg/1200px-Cat_August_2010-4.jpg" alt="可操作圖片" />
    </div>

    <div id="controls">
        <button id="flip-vertical">上下翻轉</button>
        <button id="flip-horizontal">左右翻轉</button>
        <button id="rotate">旋轉</button>
        <div id="rotate-slider-container" style="display: none;">
            <input id="rotate-slider" type="range" min="0" max="360" value="0" />
        </div>
        <button id="complete-btn">完成</button>
    </div>


    <canvas id="canvasHidden"></canvas>
    <script src="js/scripts.js"></script>
</body>
</html>